<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin require-restart="false">
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>org.modelix.mps.sync</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>Synchronization between MPS and model-servers</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor email="modelix@itemis.de" url="https://modelix.org/">itemis AG</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
    Provides minimal synchronization capabilities to exchange model content between MPS and modelix model-server
  ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>

    <applicationListeners>
        <listener
                class="org.modelix.mps.sync.listeners.MPSSynchronizationDynamicPluginListener"
                topic="com.intellij.ide.plugins.DynamicPluginListener"/>
        <listener
                class="org.modelix.mps.sync.listeners.MPSSynchronizationAppLifecycleListener"
                topic="com.intellij.ide.AppLifecycleListener"/>
    </applicationListeners>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">

        <toolWindow id="Modelix Model Synchronization" secondary="true"
                    icon="org.modelix.mps.sync.icons.CloudIcons.PLUGIN_ICON" anchor="right"
                    factoryClass="org.modelix.mps.sync.tools.ModelSyncGuiFactory"/>
        <toolWindow id="Cloud Tool" secondary="true"
                    icon="org.modelix.mps.sync.icons.CloudIcons.MODULE_ICON" anchor="bottom"
                    factoryClass="org.modelix.mps.sync.tools.cloud.CloudToolFactory"/>
        <toolWindow id="History Tool" secondary="true"
                    icon="org.modelix.mps.sync.icons.CloudIcons.MODULE_ICON" anchor="bottom"
                    factoryClass="org.modelix.mps.sync.tools.history.HistoryToolFactory"/>

        <!-- allows to 'edit modelix settings' in the settings dialog -->
        <!--        <projectConfigurable parentId="tools"-->
        <!--                             instance="org.modelix.mps.sync.configuration.settings.ProjectSettingsServiceConfigurable"-->
        <!--                             id="org.intellij.sdk.settings.PAppSettingsConfigurable"-->
        <!--                             displayName="SDK: Application Settings Example"-->
        <!--                             nonDefaultProject="true"/>-->

        <!-- service to handle storage of cloud details via project settings, aka .mps/modelix.xml -->
        <projectService
                serviceImplementation="org.modelix.mps.sync.configuration.CloudResourcesConfigurationComponent"/>

        <!-- the actual service in charge of connecting and binding -->
        <applicationService serviceImplementation="org.modelix.mps.sync.ModelSyncService"/>

        <!-- shows an indicator in the status bar to know the current connection state -->
        <statusBarWidgetFactory id="CloudStatus"
                                implementation="org.modelix.mps.sync.indicator.CloudIndicator"/>

    </extensions>
    <actions>
        <action
                id="org.modelix.mps.sync.actions.AddModelServerAction"
                class="org.modelix.mps.sync.actions.AddModelServerAction"
                text="Add Model-Server"
                description="Adds a new model-server from/to which models can be exchanged">
        </action>

        <group id="org.intellij.sdk.action.GroupedActions"
               text="Static Grouped Actions"
               popup="true"/>

        <group id="org.modelix.mps.sync.actions.ModelixDynamicActionGroup"
               class="org.modelix.mps.sync.actions.ModelixDynamicActionGroup"
               popup="true"
               text="Dynamically Grouped Actions"
               description="SDK dynamically grouped action example"
               icon="org.modelix.mps.sync.icons.CloudIcons.MODULE_ICON">
            <add-to-group group-id="ToolsMenu" anchor="first"/>
        </group>

        <action id="org.modelix.mps.sync.actions.unbind.UnbindAction"
                class="org.modelix.mps.sync.actions.unbind.UnbindAction"
                text="Unbind"
                description="Unbinds a binding attached to a Tree Node."/>

        <action id="org.modelix.mps.sync.actions.branch.SwitchBranchAction"
                class="org.modelix.mps.sync.actions.branch.SwitchBranchAction"
                text="Switch Branch"
                description="Switch to this Branch"/>

        <action id="org.modelix.mps.sync.actions.branch.LoadHistoryForBranchAction"
                class="org.modelix.mps.sync.actions.branch.LoadHistoryForBranchAction"
                text="Show History"
                description="Show history"/>

        <action id="org.modelix.mps.sync.actions.branch.AddBranchAction"
                class="org.modelix.mps.sync.actions.branch.AddBranchAction"
                text="New Branch"
                description="Add new branch"/>

        <action id="org.modelix.mps.sync.actions.modelServer.AddRepositoryAction"
                class="org.modelix.mps.sync.actions.modelServer.AddRepositoryAction"
                text="Add Repository"
                description="Add repository"/>

        <action id="org.modelix.mps.sync.actions.modelServer.RemoveModelServerAction"
                class="org.modelix.mps.sync.actions.modelServer.RemoveModelServerAction"
                text="Remove Model Server"
                description="Remove model server"/>

        <action id="org.modelix.mps.sync.actions.modelServer.ShowAuthenticationInfoAction"
                class="org.modelix.mps.sync.actions.modelServer.ShowAuthenticationInfoAction"
                text="Show Authentication Info"
                description="Show authentication info"/>

        <action id="org.modelix.mps.sync.actions.modelServer.ReconnectAction"
                class="org.modelix.mps.sync.actions.modelServer.ReconnectAction"
                text="Reconnect"
                description="Reconnect to model server"/>

        <action id="org.modelix.mps.sync.actions.repository.LoadHistoryForRepositoryAction"
                class="org.modelix.mps.sync.actions.repository.LoadHistoryForRepositoryAction"
                text="Show History"
                description="Show history"/>

        <action id="org.modelix.mps.sync.actions.repository.GetCloudRepositorySizeAction"
                class="org.modelix.mps.sync.actions.repository.GetCloudRepositorySizeAction"
                text="Get Number of Nodes"
                description="Get number of nodes in repository"/>

        <action id="org.modelix.mps.sync.actions.repository.RemoveRepositoryAction"
                class="org.modelix.mps.sync.actions.repository.RemoveRepositoryAction"
                text="Remove Repository"
                description="Remove repository"/>

        <group id="org.modelix.mps.sync.actions.node.CloudNodeActionGroup"
               class="org.modelix.mps.sync.actions.node.CloudNodeActionGroup"
               text="Cloud Node Group"
               description="Cloud node action group"/>

        <action id="org.modelix.mps.sync.actions.node.AddProjectNodeAction"
                class="org.modelix.mps.sync.actions.node.AddProjectNodeAction"
                text="Add Project"
                description="Add project"/>

        <action id="org.modelix.mps.sync.actions.node.AddModuleNodeAction"
                class="org.modelix.mps.sync.actions.node.AddModuleNodeAction"
                text="Add Module"
                description="Add module"/>

        <action id="org.modelix.mps.sync.actions.node.AddModelNodeAction"
                class="org.modelix.mps.sync.actions.node.AddModelNodeAction"
                text="Add Model"
                description="Add model"/>

        <action id="org.modelix.mps.sync.actions.node.AddProjectBindingAction"
                class="org.modelix.mps.sync.actions.node.AddProjectBindingAction"
                text="Bind to Current Project"
                description="Bind to current project"/>

        <action id="org.modelix.mps.sync.actions.node.StoreAllModulesAction"
                class="org.modelix.mps.sync.actions.node.StoreAllModulesAction"
                text="Store Entire MPS Module Repository"
                description="Store entire MPS module repository"/>

        <action id="org.modelix.mps.sync.actions.node.DeleteProjectAction"
                class="org.modelix.mps.sync.actions.node.DeleteProjectAction"
                text="Delete Project"
                description="Delete project"/>

        <action id="org.modelix.mps.sync.actions.node.DeleteModuleAction"
                class="org.modelix.mps.sync.actions.node.DeleteModuleAction"
                text="Delete Module"
                description="Delete module"/>

        <action id="org.modelix.mps.sync.actions.node.AddTransientModuleBindingAction"
                class="org.modelix.mps.sync.actions.node.AddTransientModuleBindingAction"
                text="Bind to Transient Module"
                description="Bind to transient module"/>

        <action id="org.modelix.mps.sync.actions.node.RemoveTransientModuleBindingAction"
                class="org.modelix.mps.sync.actions.node.RemoveTransientModuleBindingAction"
                text="Unbind from Transient Module"
                description="Unbind from transient module"/>

        <action id="org.modelix.mps.sync.actions.node.CheckoutModuleAction"
                class="org.modelix.mps.sync.actions.node.CheckoutModuleAction"
                text="Checkout"
                description="Checkout module"/>

        <action id="org.modelix.mps.sync.actions.node.CheckoutAndSyncModuleAction"
                class="org.modelix.mps.sync.actions.node.CheckoutAndSyncModuleAction"
                text="Checkout and Sync"
                description="Checkout and sync module"/>

        <action id="org.modelix.mps.sync.actions.node.ShowPropertiesAction"
                class="org.modelix.mps.sync.actions.node.ShowPropertiesAction"
                text="Show Properties"
                description="Show properties"/>

        <action id="org.modelix.mps.sync.actions.node.ShowReferencesAction"
                class="org.modelix.mps.sync.actions.node.ShowReferencesAction"
                text="Show References"
                description="Show references"/>

        <action id="org.modelix.mps.sync.actions.node.NavigateToMpsNodeAction"
                class="org.modelix.mps.sync.actions.node.NavigateToMpsNodeAction"
                text="Navigate to Corresponding MPS Node"
                description="Navigate to corresponding MPS node"/>

        <group id="org.modelix.mps.sync.actions.node.SetPropertyActionGroup"
               class="org.modelix.mps.sync.actions.node.SetPropertyActionGroup"
               text="Set Node Property Action Group"
               description="Set node property action group"/>

        <action id="org.modelix.mps.sync.actions.node.SetPropertyAction"
                class="org.modelix.mps.sync.actions.node.SetPropertyAction"
                text="Set Property"
                description="Set property"/>
    </actions>
</idea-plugin>
